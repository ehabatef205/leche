upstream api{
    server leche-app:7050;
}
upstream client{
    server react_leche:3060;
}


server{
    listen 80;
    add_header Access-Control-Allow-Origin *;
    root /usr/share/nginx/html/;
    location / {

      try_files $uri /index.html;     
    }

    location /api {
         rewrite /api/(.*) /$1 break;
        proxy_pass http://leche-app:7050;
        proxy_set_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Max-Age 3600;
        add_header Access-Control-Expose-Headers Content-Length;
        add_header Access-Control-Allow-Headers Range;
    }

     location / {
         rewrite /(.*) /$1 break;
        proxy_pass http://react_leche:3060;
        proxy_set_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Max-Age 3600;
        add_header Access-Control-Expose-Headers Content-Length;
        add_header Access-Control-Allow-Headers Range;
    }
    
}